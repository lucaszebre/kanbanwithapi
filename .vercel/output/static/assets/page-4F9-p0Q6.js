import{r as x,u as Z,a as ee,j as e,c as se,b as te,P as y,d as A,R as ae,I as re,e as S,f as ne,g as T,h as ie,i as C,k as R,z as w,o as _,s as N,l as oe,m as L,n as k,C as D,p as M,q as V,t as $,F as B,v as f,w as h,x as p,y as j,A as v,B as b,D as G,E as z,G as le,L as ce,Q as de,H as ue}from"./index-QrBDpgyu.js";import{E as me}from"./errorPage-B9N8iMKR.js";var I="Tabs",[xe]=se(I,[A]),q=A(),[ge,E]=xe(I),H=x.forwardRef((s,t)=>{const{__scopeTabs:o,value:a,onValueChange:i,defaultValue:n,orientation:r="horizontal",dir:c,activationMode:m="automatic",...l}=s,u=Z(c),[d,g]=ee({prop:a,onChange:i,defaultProp:n??"",caller:I});return e.jsx(ge,{scope:o,baseId:te(),value:d,onValueChange:g,orientation:r,dir:u,activationMode:m,children:e.jsx(y.div,{dir:u,"data-orientation":r,...l,ref:t})})});H.displayName=I;var K="TabsList",Q=x.forwardRef((s,t)=>{const{__scopeTabs:o,loop:a=!0,...i}=s,n=E(K,o),r=q(o);return e.jsx(ae,{asChild:!0,...r,orientation:n.orientation,dir:n.dir,loop:a,children:e.jsx(y.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:t})})});Q.displayName=K;var U="TabsTrigger",O=x.forwardRef((s,t)=>{const{__scopeTabs:o,value:a,disabled:i=!1,...n}=s,r=E(U,o),c=q(o),m=X(r.baseId,a),l=Y(r.baseId,a),u=a===r.value;return e.jsx(re,{asChild:!0,...c,focusable:!i,active:u,children:e.jsx(y.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:m,...n,ref:t,onMouseDown:S(s.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?r.onValueChange(a):d.preventDefault()}),onKeyDown:S(s.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&r.onValueChange(a)}),onFocus:S(s.onFocus,()=>{const d=r.activationMode!=="manual";!u&&!i&&d&&r.onValueChange(a)})})})});O.displayName=U;var J="TabsContent",W=x.forwardRef((s,t)=>{const{__scopeTabs:o,value:a,forceMount:i,children:n,...r}=s,c=E(J,o),m=X(c.baseId,a),l=Y(c.baseId,a),u=a===c.value,d=x.useRef(u);return x.useEffect(()=>{const g=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx(ne,{present:i||u,children:({present:g})=>e.jsx(y.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":m,hidden:!g,id:l,tabIndex:0,...r,ref:t,style:{...s.style,animationDuration:d.current?"0s":void 0},children:g&&n})})});W.displayName=J;function X(s,t){return`${s}-trigger-${t}`}function Y(s,t){return`${s}-content-${t}`}var fe=H,he=Q,pe=O,je=W;function ve({className:s,...t}){return e.jsx(fe,{"data-slot":"tabs",className:T("flex flex-col gap-2",s),...t})}function be({className:s,...t}){return e.jsx(he,{"data-slot":"tabs-list",className:T("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function F({className:s,...t}){return e.jsx(pe,{"data-slot":"tabs-trigger",className:T("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function P({className:s,...t}){return e.jsx(je,{"data-slot":"tabs-content",className:T("flex-1 outline-none",s),...t})}const we=()=>{const s=ie(),{t}=C(),[o,a]=x.useState(!1),[i,n]=x.useState(!1);return{signin:async(c,m)=>{try{a(!0);const l=await R.login(c,m);a(!1),l&&s("/auth/complete")}catch(l){a(!1),n(!0),w.error(t("error:invalidCredentials")),console.error("could authentificated",l)}},isLoading:o,isError:i}},Ne=_({email:oe({message:"Invalid email address."}),password:N().min(1,{message:"Password is required."})}),ye=()=>{const{t:s}=C("auth"),t=L({resolver:k(Ne),defaultValues:{email:"",password:""}}),{signin:o,isLoading:a}=we();async function i(n){o(n.email,n.password)}return e.jsxs(D,{className:"p-4",children:[e.jsxs(M,{className:"space-y-1",children:[e.jsx(V,{className:"text-2xl ",children:s("login.title")}),e.jsx($,{children:s("login.description")})]}),e.jsx(B,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(i),className:"p-3 content-start items-start flex-col space-y-8",children:[e.jsx(f,{control:t.control,name:"email",render:({field:n})=>e.jsxs(h,{className:"flex-col items-start content-start w-full",children:[e.jsx(p,{className:"text-start w-full",children:s("login.email")}),e.jsx(j,{children:e.jsx(v,{placeholder:s("login.emailPlaceholder"),...n})}),e.jsx(b,{})]})}),e.jsx(f,{control:t.control,name:"password",render:({field:n})=>e.jsxs(h,{className:"w-full",children:[e.jsx(p,{className:"text-start items-start w-full",children:s("login.password")}),e.jsx(j,{children:e.jsx(v,{type:"password",placeholder:s("login.passwordPlaceholder"),...n})}),e.jsx(b,{})]})}),e.jsxs(G,{type:"submit",className:"w-full cursor-pointer",children:[a&&e.jsx(z.spinner,{className:"mr-2 h-4 w-4 animate-spin"}),s("login.loginButton")]})]})})]})},Te=_({name:N().min(2,{message:"Name must be at least 2 characters."}),email:N().email({message:"Invalid email address."}),password:N().min(6,{message:"Password must be at least 6 characters."})}),Ce=()=>{const{t:s}=C("auth"),[t,o]=x.useState(!1),a=L({resolver:k(Te),defaultValues:{email:"",password:"",name:""}}),i=async(r,c,m)=>{try{const l=await R.register(r,c,m);if(l){if(l.data.status===404){w.error(s("register.alreadyUsedEmailError"));return}return w.success(s("register.registeredSuccess")),l}else throw new Error(s("register.registrationFailed"))}catch{w.error(s("register.alreadyUsedEmailError"))}};async function n(r){o(!0),await i(r.email,r.password,r.name),a.reset({email:"",password:"",name:""},{keepDirtyValues:!1}),o(!1)}return e.jsxs(D,{className:"p-2",children:[e.jsxs(M,{className:"space-y-1",children:[e.jsx(V,{className:"text-2xl ",children:s("register.title")}),e.jsx($,{children:s("register.description")})]}),e.jsx(B,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(n),className:"p-3 content-start items-start flex-col space-y-8",children:[e.jsx(f,{control:a.control,name:"name",render:({field:r})=>e.jsxs(h,{className:"flex-col items-start content-start w-full",children:[e.jsx(p,{className:"text-start w-full",children:s("register.name")}),e.jsx(j,{children:e.jsx(v,{placeholder:s("register.namePlaceholder")||"",...r})}),e.jsx(b,{})]})})," ",e.jsx(f,{control:a.control,name:"email",render:({field:r})=>e.jsxs(h,{className:"flex-col items-start content-start w-full",children:[e.jsx(p,{className:"text-start w-full",children:s("register.email")}),e.jsx(j,{children:e.jsx(v,{type:"email",placeholder:s("register.emailPlaceholder")||"",...r})}),e.jsx(b,{})]})}),e.jsx(f,{control:a.control,name:"password",render:({field:r})=>e.jsxs(h,{className:"w-full",children:[e.jsx(p,{className:"text-start items-start w-full",children:s("register.password")}),e.jsx(j,{children:e.jsx(v,{type:"password",placeholder:s("register.passwordPlaceholder")||"",...r})}),e.jsx(b,{})]})}),e.jsxs(G,{className:"w-full cursor-pointer",children:[t&&e.jsx(z.spinner,{className:"mr-2 h-4 w-4 animate-spin"}),s("register.submitButton")]})]})})]})},Ie=()=>{const{t:s}=C("auth");return e.jsxs("div",{className:" relative bg-white w-full h-screen flex col content-center items-center justify-center ",children:[e.jsx(le,{}),e.jsxs("div",{className:"relative w-full   h-full flex-col bg-muted p-10 text-white dark:border-r  ",children:[e.jsx("div",{className:"relative z-20 hidden items-center text-lg font-medium md:flex",children:e.jsx(ce,{reloadDocument:!0,to:"/",children:e.jsx("img",{src:"/assets/logo-dark.svg",alt:"",width:152,height:26})})}),e.jsx("div",{className:"lg:p-8 flex items-center justify-center",children:e.jsx("div",{className:" flex w-full items-center flex-row justify-center space-y-6 sm:w-[450px]",children:e.jsxs(ve,{defaultValue:"register",className:"w-[450px]",children:[e.jsxs(be,{children:[e.jsx(F,{className:"cursor-pointer",value:"login",children:s("tabs.login")}),e.jsx(F,{className:"cursor-pointer",value:"register",children:s("tabs.register")})]}),e.jsx(P,{value:"login",children:e.jsx(ye,{})}),e.jsx(P,{value:"register",children:e.jsx(Ce,{})})]})})})]})]})},Se=new ue,Pe=()=>e.jsx(e.Fragment,{children:e.jsx(de,{client:Se,children:e.jsx(me,{children:e.jsx(Ie,{})})})});export{Pe as AuthPage};
