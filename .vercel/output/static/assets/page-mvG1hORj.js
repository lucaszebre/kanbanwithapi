import{J as de,S as ge,K as ae,M as I,N as X,O as B,T as Y,U as Z,V as ie,W as ye,X as z,Y as Ce,Z as ve,_ as oe,$ as he,r as p,a0 as je,a1 as Q,a2 as M,a3 as j,a4 as te,a5 as C,a6 as $,a7 as W,j as s,A as G,i as O,a8 as F,z as P,a9 as se,o as me,s as D,aa as Te,ab as Ie,ac as ke,m as we,n as Se,ad as Re,F as Ne,v as V,w as H,x as J,y as q,B as K,ae as Ee,af as Me,D as R,ag as Oe,ah as Fe,ai as fe,E as pe,C as _e,aj as Le,ak as Be,al as De,am as Pe}from"./index-QrBDpgyu.js";import{E as Qe}from"./errorPage-B9N8iMKR.js";import{u as $e}from"./useUserSession-CSgDL0AO.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ae=de("pencil",Ue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ve=de("trash-2",ze);var He=class extends ge{constructor(e,t){super(),this.options=t,this.#s=e,this.#n=null,this.#r=ae(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#f=void 0;#t=void 0;#i;#u;#r;#n;#p;#d;#h;#o;#l;#a;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),le(this.#e,this.options)?this.#c():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ee(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ee(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#C(),this.#v(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,r=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof I(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#e.setOptions(this.options),t._defaulted&&!X(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&ce(this.#e,r,this.options,t)&&this.#c(),this.updateResult(),n&&(this.#e!==r||I(this.options.enabled,this.#e)!==I(t.enabled,this.#e)||B(this.options.staleTime,this.#e)!==B(t.staleTime,this.#e))&&this.#b();const a=this.#x();n&&(this.#e!==r||I(this.options.enabled,this.#e)!==I(t.enabled,this.#e)||a!==this.#a)&&this.#g(a)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),r=this.createResult(t,e);return Ke(this,r)&&(this.#t=r,this.#u=this.options,this.#i=this.#e.state),r}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#r.status==="pending"&&this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),r=this.#s.getQueryCache().build(this.#s,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#j();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Y)),t}#b(){this.#C();const e=B(this.options.staleTime,this.#e);if(Z||this.#t.isStale||!ie(e))return;const r=ye(this.#t.dataUpdatedAt,e)+1;this.#o=z.setTimeout(()=>{this.#t.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#g(e){this.#v(),this.#a=e,!(Z||I(this.options.enabled,this.#e)===!1||!ie(this.#a)||this.#a===0)&&(this.#l=z.setInterval(()=>{(this.options.refetchIntervalInBackground||Ce.isFocused())&&this.#c()},this.#a))}#y(){this.#b(),this.#g(this.#x())}#C(){this.#o&&(z.clearTimeout(this.#o),this.#o=void 0)}#v(){this.#l&&(z.clearInterval(this.#l),this.#l=void 0)}createResult(e,t){const r=this.#e,n=this.options,a=this.#t,o=this.#i,l=this.#u,d=e!==r?e.state:this.#f,{state:f}=e;let h={...f},u=!1,c;if(t._optimisticResults){const v=this.hasListeners(),U=!v&&le(e,t),E=v&&ce(e,r,t,n);(U||E)&&(h={...h,...ve(f.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:g,errorUpdatedAt:w,status:T}=h;c=h.data;let x=!1;if(t.placeholderData!==void 0&&c===void 0&&T==="pending"){let v;a?.isPlaceholderData&&t.placeholderData===l?.placeholderData?(v=a.data,x=!0):v=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,v!==void 0&&(T="success",c=oe(a?.data,v,t),u=!0)}if(t.select&&c!==void 0&&!x)if(a&&c===o?.data&&t.select===this.#p)c=this.#d;else try{this.#p=t.select,c=t.select(c),c=oe(a?.data,c,t),this.#d=c,this.#n=null}catch(v){this.#n=v}this.#n&&(g=this.#n,c=this.#d,w=Date.now(),T="error");const S=h.fetchStatus==="fetching",m=T==="pending",y=T==="error",N=m&&S,_=c!==void 0,k={status:T,fetchStatus:h.fetchStatus,isPending:m,isSuccess:T==="success",isError:y,isInitialLoading:N,isLoading:N,data:c,dataUpdatedAt:h.dataUpdatedAt,error:g,errorUpdatedAt:w,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:S,isRefetching:S&&!m,isLoadingError:y&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:u,isRefetchError:y&&_,isStale:re(e,t),refetch:this.refetch,promise:this.#r,isEnabled:I(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const v=A=>{k.status==="error"?A.reject(k.error):k.data!==void 0&&A.resolve(k.data)},U=()=>{const A=this.#r=k.promise=ae();v(A)},E=this.#r;switch(E.status){case"pending":e.queryHash===r.queryHash&&v(E);break;case"fulfilled":(k.status==="error"||k.data!==E.value)&&U();break;case"rejected":(k.status!=="error"||k.error!==E.reason)&&U();break}}return k}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#u=this.options,this.#i.data!==void 0&&(this.#h=this.#e),X(t,e))return;this.#t=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#m.size)return!0;const o=new Set(a??this.#m);return this.options.throwOnError&&o.add("error"),Object.keys(this.#t).some(l=>{const i=l;return this.#t[i]!==e[i]&&o.has(i)})};this.#T({listeners:r()})}#j(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#f=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#T(e){he.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function qe(e,t){return I(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function le(e,t){return qe(e,t)||e.state.data!==void 0&&ee(e,t,t.refetchOnMount)}function ee(e,t,r){if(I(t.enabled,e)!==!1&&B(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&re(e,t)}return!1}function ce(e,t,r,n){return(e!==t||I(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&re(e,r)}function re(e,t){return I(t.enabled,e)!==!1&&e.isStaleByTime(B(t.staleTime,e))}function Ke(e,t){return!X(e.getCurrentResult(),t)}var be=p.createContext(!1),We=()=>p.useContext(be);be.Provider;function Je(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Xe=p.createContext(Je()),Ye=()=>p.useContext(Xe),Ze=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Ge=e=>{p.useEffect(()=>{e.clearReset()},[e])},et=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||je(r,[e.error,n])),tt=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},st=(e,t)=>e.isLoading&&e.isFetching&&!t,rt=(e,t)=>e?.suspense&&t.isPending,ue=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function nt(e,t,r){const n=We(),a=Ye(),o=Q(),l=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=n?"isRestoring":"optimistic",tt(l),Ze(l,a),Ge(a);const i=!o.getQueryCache().get(l.queryHash),[d]=p.useState(()=>new t(o,l)),f=d.getOptimisticResult(l),h=!n&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(u=>{const c=h?d.subscribe(he.batchCalls(u)):Y;return d.updateResult(),c},[d,h]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),p.useEffect(()=>{d.setOptions(l)},[l,d]),rt(l,f))throw ue(l,d,a);if(et({result:f,errorResetBoundary:a,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw f.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,f),l.experimental_prefetchInRender&&!Z&&st(f,n)&&(i?ue(l,d,a):o.getQueryCache().get(l.queryHash)?.promise)?.catch(Y).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?f:d.trackResult(f)}function at(e,t){return nt(e,He)}const ne="api/columns",xe="api/boards",it=async(e,t)=>{try{const r=await M.post(`/${xe}/${e}/columns`,{name:t});return r?r.data:(j(),console.error("Error adding column"),null)}catch(r){return j(),console.error("Error adding column:",r),null}},ot=async(e,t,r)=>{if(e!==t)try{const n=await M.patch(`/api/tasks/${r}/column/${e}`);return n.data?n.data:(j(),console.error("Error changing column"),null)}catch(n){return j(),console.error("Error changing column:",n),null}return null},lt=async(e,t)=>{try{const r=await M.patch(`/${ne}/${e}`,{name:t});return r.data?r.data:(j(),console.error("Error changing column name"),null)}catch(r){return j(),console.error("Error changing column name:",r),null}},ct=async e=>{try{const t=await M.delete(`/${ne}/${e}`);return t?t.data:(j(),console.error("Error deleting column"),null)}catch(t){return j(),console.error("Error deleting column:",t),null}},ut=async e=>{try{const t=await M.get(`/${xe}/${e}/columns`);return t.data?t.data:(j(),console.error("Error fetching columns"),null)}catch(t){return j(),console.error("Error fetching columns:",t),null}},dt=async e=>{try{const t=await M.get(`/${ne}/${e}`);return t.data?t.data:(j(),console.error("Error getting column"),null)}catch(t){return j(),console.error("Error getting column:",t),null}},ht={addColumn:it,changeColumn:ot,updateColumn:lt,deleteColumn:ct,fetchColumns:ut,getColumn:dt},mt="_ListTaskDiv_7ejyr_1",ft="_ListTaskTitle_7ejyr_17",L={ListTaskDiv:mt,ListTaskTitle:ft},pt=({subtask:e,taskId:t,columnId:r,boardId:n})=>{const{theme:a}=te(),[o,l]=p.useState(e.isCompleted),i=C(g=>g.toggleSubtask),d=$({mutationFn:g=>W.toggleSubtaskCompletion(g.subtaskId,g.isCompleted)}),f=()=>{l(!o),i({boardId:n,columnId:r,taskId:t,isCompleted:!o,subtaskId:e.id}),d.mutate({isCompleted:!o,subtaskId:e.id})},h="w-full flex flex-row items-center justify-start gap-4 mb-4 rounded-md p-4 transition-colors",u=a==="light"?"bg-[rgb(222,237,249)]":"bg-[#20212C]",c=o?"line-through text-[#BDBDBD]":a==="light"?"text-black":"text-white";return s.jsxs("div",{className:`${h} ${u}`,style:{height:o?"40px":"auto"},children:[s.jsx(G,{type:"checkbox",checked:o,onChange:f,className:"cursor-pointer accent-[#635FC7]"}),s.jsx("p",{className:`text-sm font-medium ${c}`,children:e.title})]})},bt=({subtasks:e,boardId:t,columnId:r,taskId:n})=>e.length?s.jsx(s.Fragment,{children:e.map((a,o)=>s.jsx(pt,{taskId:n,columnId:r,boardId:t,subtask:a},o))}):null,xt=({title:e,id:t,columnId:r,open:n,setOpen:a})=>{const{t:o}=O("task"),{boardId:l}=F(),i=C(c=>c.taskManager),d=C(c=>c.deleteTask),f=p.useMemo(()=>i?.boards?.find(c=>c.id===l)??i?.boards?.[0]??null,[l,i]),h=Q(),u=$({mutationFn:c=>W.deleteTask(c.taskId),onSuccess:()=>{h.refetchQueries({queryKey:["boards"]})},onError:()=>{P.error(o("delete.toast.error"))}});return s.jsx(se,{open:n,onOpenChange:c=>{c||a(!1)},title:o("delete.modalTitle"),description:s.jsx("span",{className:"text-left block",children:o("delete.description",{title:e})}),variant:"destructive",size:"md",confirmLabel:o("delete.buttons.confirm"),cancelLabel:o("delete.buttons.cancel"),onConfirm:()=>{d({boardId:f?.id,columnId:r,id:t}),u.mutate({boardId:f?.id,columnId:r,taskId:t})},className:"w-[480px]"})},gt=me({id:D(),title:D().min(1,"Can't be empty"),isCompleted:ke(),index:Ie()}),yt=me({title:D().min(1,"Can't be empty"),description:D().optional(),subtasks:Te(gt),columnId:D("Please select a column.")}),Ct=({task:e,open:t,setOpen:r})=>{const{boardIdParms:n}=F(),a=C(m=>m.taskManager),o=C(m=>m.updateTask),l=C(m=>m.changeCol),{t:i}=O("task"),{theme:d}=te(),f=p.useMemo(()=>n??a?.boards?.[0]?.id,[n,a]),h=p.useMemo(()=>a?.boards?.find(m=>m.id===f)??a?.boards?.[0]??null,[f,a]),u=we({resolver:Se(yt),defaultValues:{title:e.title,description:e.description,subtasks:e.subtasks,columnId:e.columnId}}),{fields:c,append:g,remove:w}=Re({control:u.control,name:"subtasks"});p.useEffect(()=>{u.reset({title:e.title,description:e.description,subtasks:e.subtasks,columnId:e.columnId})},[e,u]);const T=Q(),x=$({mutationFn:m=>W.editTask(m),onSuccess:()=>{T.refetchQueries({queryKey:["boards","Task"]}),P.success(i("edit.toast.success")),r(!1)},onError:()=>{P.error(i("edit.toast.error"))}}),S=m=>{if(m.columnId&&m.columnId!==e.columnId&&l({boardId:f,columnId:e.columnId,newColumnId:m.columnId,taskId:e.id}),a&&f&&f.length>0){const y={id:e.id,title:m.title,description:m.description||"",columnId:m.columnId,subtasks:m.subtasks,index:e.index};o({boardId:f,...y}),x.mutate(y)}};return s.jsx(se,{open:t,onOpenChange:r,title:i("edit.modalTitle"),hideActions:!0,size:"lg",className:"w-[480px] max-h-[90%] overflow-y-auto p-8",children:s.jsx(Ne,{...u,children:s.jsxs("form",{onSubmit:u.handleSubmit(S),className:"flex flex-col gap-4 w-full h-full items-start justify-between",children:[s.jsx(V,{control:u.control,name:"title",render:({field:m})=>s.jsxs(H,{className:"w-full",children:[s.jsx(J,{className:`text-xs font-semibold ${d==="light"?"text-black":"text-white"}`,children:i("edit.form.titleLabel")}),s.jsx(q,{children:s.jsx(G,{placeholder:i("edit.form.titlePlaceholder"),...m,className:`w-full h-10 border border-gray-400 rounded-md bg-transparent text-lg font-semibold px-4 cursor-pointer outline-none focus:ring-2 focus:ring-indigo-500 ${d==="light"?"text-black":"text-white"}`})}),s.jsx(K,{})]})}),s.jsx(V,{control:u.control,name:"description",render:({field:m})=>s.jsxs(H,{className:"w-full",children:[s.jsx(J,{className:`text-xs font-semibold ${d==="light"?"text-black":"text-white"}`,children:i("edit.form.descriptionLabel")}),s.jsx(q,{children:s.jsx(Ee,{className:`w-full h-32 border border-gray-400 rounded-md bg-transparent cursor-pointer p-2 resize-none outline-none focus:ring-2 focus:ring-indigo-500 ${d==="light"?"text-black":"text-white"}`,...m})}),s.jsx(K,{})]})}),c.length>0&&s.jsx(Me,{className:`text-xs font-semibold ${d==="light"?"text-black":"text-white"}`,children:i("edit.form.subtasksLabel")}),c.map((m,y)=>s.jsx(V,{control:u.control,name:`subtasks.${y}.title`,render:({field:N})=>s.jsxs(H,{className:"flex items-center gap-2 w-full",children:[s.jsx(q,{children:s.jsx(G,{...N,className:"flex-grow"})}),s.jsx(R,{type:"button",variant:"ghost",className:"cursor-pointer",onClick:()=>w(y),children:s.jsx(Oe,{icon:"mdi:trash-outline",className:"h-4 w-4"})}),s.jsx(K,{})]})},m.id)),s.jsx(R,{className:"w-full h-10 rounded-md bg-[rgb(188,211,232)] text-[#635FC7] text-lg font-semibold cursor-pointer",type:"button",onClick:()=>g({id:Fe(),title:"",isCompleted:!1,index:c.length}),children:i("edit.form.addSubtaskButton")}),s.jsx(V,{control:u.control,name:"columnId",render:({field:m})=>s.jsxs(H,{className:"w-full",children:[s.jsx(J,{className:`text-xs font-semibold ${d==="light"?"text-black":"text-white"}`,children:i("edit.form.statusLabel")}),s.jsx(q,{children:s.jsx(fe,{label:null,value:m.value,onValueChange:m.onChange,placeholder:i("view.selectColumnPlaceholder",{defaultValue:"Select column"}),items:(h?.columns||[]).map(y=>({value:y.id,label:y.name})),triggerClassName:"w-full h-12",className:"mt-1 w-full"})}),s.jsx(K,{})]})}),s.jsxs(R,{className:"w-full h-10 rounded-md bg-[#635FC7] text-white text-lg font-semibold cursor-pointer",type:"submit",disabled:x.isPending,children:[x.isPending&&s.jsx(pe.spinner,{className:"mr-2 h-4 w-4 animate-spin"}),i("edit.form.saveButton")]})]})})})},vt=({task:e,open:t,setOpen:r})=>{const{boardId:n}=F(),a=C(b=>b.taskManager),o=C(b=>b.changeCol),l=C(b=>b.updateTask),[i,d]=p.useState(e.columnId),[f,h]=p.useState(!1),[u,c]=p.useState(!1),g=p.useMemo(()=>n??a?.boards?.[0]?.id??"",[n,a]),w=p.useMemo(()=>a?.boards?.find(b=>b.id===g)??a?.boards?.[0]??null,[g,a]),T=Q(),{t:x}=O("task"),S=$({mutationFn:b=>W.editTask(b),onSuccess:()=>{T.invalidateQueries({queryKey:["boards","Task"]}),P.success(x("edit.toast.success"))},onError:()=>{P.error(x("edit.toast.error"))}});if(!e)return s.jsx(s.Fragment,{});const m="w-full flex items-center justify-between",y="text-lg font-semibold",N="text-sm font-semibold text-left",_="text-xs font-semibold";return s.jsxs(s.Fragment,{children:[s.jsx(Ct,{task:e,open:f,setOpen:h}),s.jsx(xt,{id:e.id,columnId:e.columnId,title:e.title,open:u,setOpen:c}),s.jsxs(se,{open:t,onOpenChange:async b=>{r(b),i&&i!==e.columnId&&(o({boardId:g,columnId:e.columnId,newColumnId:i,taskId:e.id}),l({boardId:g,...e,columnId:i}),S.mutate({...e,columnId:i}))},hideActions:!0,size:"lg",className:"max-h-[90%] w-[480px] overflow-y-auto",children:[s.jsxs("div",{className:m,children:[s.jsx("h1",{className:y,children:e.title}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(R,{variant:"outline",type:"button",onClick:()=>{h(!0),r(!1)},"aria-label":x("actions.editAria"),className:"p-2 rounded-md cursor-pointer",children:s.jsx(Ae,{className:"size-4"})}),s.jsx(R,{type:"button",variant:"outline",onClick:()=>{c(!0),r(!1)},"aria-label":x("actions.deleteAria"),className:"p-2 rounded-md cursor-pointer  text-[#ea5555] transition-colors",children:s.jsx(Ve,{className:"size-4"})})]})]}),s.jsx("p",{className:N,children:e.description||x("view.noDescription")}),e.subtasks.length>0&&s.jsx("h2",{className:_,children:x("view.subtasksHeading")}),s.jsx(bt,{boardId:w?.id,columnId:i,taskId:e.id,subtasks:e.subtasks}),s.jsx("h2",{className:_,children:x("view.currentStatusHeading")}),s.jsx(fe,{label:null,value:i,onValueChange:b=>d(b),placeholder:x("view.selectColumnPlaceholder",{defaultValue:"Select column"}),items:(w?.columns||[]).map(b=>({value:b.id,label:b.name})),triggerClassName:"w-full h-12",className:"mt-1"})]})]})},jt=e=>{const{theme:t}=te(),[r,n]=p.useState(!1),{t:a}=O("task");function o(){let h=0;if(e.subtasks)for(const u of e.subtasks)u.isCompleted&&h++;return h}const l="cursor-pointer rounded-lg px-4 py-2 w-[280px] text-left mb-4 shadow-sm hover:shadow-md transition-shadow",i=t==="light"?"bg-white shadow-[0_0_10px_0_rgba(0,0,0,0.2)]":"bg-[#2B2C37] shadow-[0_0_10px_0_rgba(0,0,0,0.2)]",d="text-lg font-semibold mb-4 hover:text-[#3F51B5] transition-colors "+(t==="light"?"text-black":"text-white");return s.jsxs(s.Fragment,{children:[s.jsx(vt,{task:e,open:r,setOpen:n}),s.jsxs(_e,{className:`${l} ${i}`,onClick:()=>{n(!0)},children:[s.jsx("h1",{className:d,children:e.title}),s.jsx("p",{className:"text-gray-500 text-sm font-semibold mb-4",children:a("card.progress",{completed:o(),total:e.subtasks.length})})]})]})},Tt=({tasks:e,id:t,name:r})=>{const{boardId:n}=F(),a=C(u=>u.taskManager),o=C(u=>u.updateColumn),l=Q(),{mutate:i}=$({mutationFn:({id:u,name:c})=>ht.updateColumn(u,c),onSuccess:()=>{l.invalidateQueries({queryKey:["boards"]})}}),d=p.useMemo(()=>n??a?.boards[0]?.id??"",[n,a]),f=u=>{o({boardId:d,columnId:t,name:u}),i({id:t,name:u})},h=()=>e.map(u=>s.jsx("div",{children:s.jsx(jt,{...u,columnId:t},u.id)},u.id));return s.jsxs("div",{className:L.ListTaskDiv,children:[s.jsxs("div",{className:"flex flex-row gap-3 items-start",children:[s.jsx(Le,{initialValue:`${r}`,onSave:f,textClassName:L.ListTaskTitle,inputClassName:`${L.ListTaskTitle} bg-transparent border-b-2 border-gray-400 focus:outline-none`}),s.jsxs("span",{className:L.ListTaskTitle,children:["(",e.length,")"]})]}),s.jsx("div",{className:L.ListTaskCols,children:h()})]})},It=()=>{const{t:e}=O("board"),t=C(i=>i.taskManager),{boardId:r}=F(),n=p.useMemo(()=>t?.boards?.find(i=>i.id===r)??t?.boards?.[0]??null,[r,t]);return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full box-border text-[14px] cursor-pointer",children:[s.jsx("h1",{className:"text-[20px] font-medium mb-2.5 text-gray-500 md:text-[20px] text-center px-4 md:px-0",children:e("empty.title")}),s.jsx(Be,{board:n,children:s.jsx(R,{className:"bg-[#635FC7] text-white rounded-md px-5 py-2.5 text-[14px] font-medium cursor-pointer transition-colors  h-12 hover:brightness-110",children:e("empty.button")})})]})})},kt=()=>{const{t:e}=O("board");return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"m-auto flex h-full w-full flex-col items-center justify-center gap-y-4",children:[s.jsx("h2",{className:"text-center text-lg font-bold ",children:e("noBoardsMessage")}),s.jsx(De,{children:s.jsx(R,{variant:"secondary",className:"cursor-pointer rounded-3xl p-4",children:e("addBoardButton")})})]})})},wt=()=>{const{boardId:e}=F(),t=C(i=>i.taskManager),r=p.useMemo(()=>t?.boards?.find(i=>i.id===e)??t?.boards?.[0]??null,[e,t]),{data:n,isStale:a}=at({queryKey:["boards"],queryFn:()=>Pe.fetchBoards()}),o=C(i=>i.setTaskManagerData);p.useEffect(()=>{n&&o(n)},[n,a,o]);function l(){return r?.columns&&r?.columns?.length>0?s.jsx("div",{className:"flex gap-4",children:r?.columns.sort((i,d)=>i.index-d.index).map(i=>s.jsx(Tt,{...i},i.id))}):s.jsx(It,{})}return t&&r?s.jsx(s.Fragment,{children:l()}):s.jsx(kt,{})},Et=()=>{const{user:e}=$e({redirectTo:"/auth"});return e?s.jsx(Qe,{children:s.jsx(wt,{})}):s.jsx("div",{className:" flex-col flex justify-center items-center h-screen w-full ",children:s.jsx(pe.spinner,{className:"mr-2 h-12 w-12 animate-spin"})})};export{Et as Home};
